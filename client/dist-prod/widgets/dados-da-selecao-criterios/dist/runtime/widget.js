System.register(["jimu-core/react","jimu-arcgis","esri/layers/FeatureLayer","esri/config"],(function(e,o){var t={},r={},s={},a={};return{setters:[function(e){t.default=e.default,t.useEffect=e.useEffect,t.useRef=e.useRef,t.useState=e.useState},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent},function(e){s.default=e.default},function(e){a.default=e.default}],execute:function(){e((()=>{var e={725:e=>{"use strict";e.exports=a},633:e=>{"use strict";e.exports=s},686:e=>{"use strict";e.exports=r},972:e=>{"use strict";e.exports=t}},o={};function i(t){var r=o[t];if(void 0!==r)return r.exports;var s=o[t]={exports:{}};return e[t](s,s.exports,i),s.exports}i.d=(e,o)=>{for(var t in o)i.o(o,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},i.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var n={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(n),i.d(n,{__set_webpack_public_path__:()=>s,default:()=>r});var e=i(972),o=i(686),t=i(633);function r(r){var s;const a=(0,e.useRef)(),[i,n]=(0,e.useState)([]),[c,l]=(0,e.useState)(null);console.log("\u{1f50d} Experience Builder Widget iniciado [dados-da-selecao-criterios]");const d=["https://localhost:3001","https://portalgis.petrobras.com.br","https://portalgisd.petrobras.com.br","http://localhost:8080","https://explorad.petrobras.com.br","https://explora.petrobras.com.br"];(0,e.useEffect)((()=>{console.log("Widget rodando em window.location.origin:",window.location.origin),window.addEventListener("message",(e=>{if(console.log("Entrou no message do EB..."),!d.includes(e.origin))return void console.warn("Origem n\xe3o permitida:",e.origin);const{type:o,data:t}=e.data;console.log("Mensagem recebida:",e.data),console.log("Tipo:",o),console.log("Dados brutos:",t),console.log("Array?",Array.isArray(t),"| Tamanho:",null==t?void 0:t.length),"codigosPocos"===o&&Array.isArray(t)?(console.log("Po\xe7os v\xe1lidos recebidos:",t.join(", ")),n(t)):console.warn("Dados inv\xe1lidos recebidos:",t)}))}),[]),(0,e.useEffect)((()=>{c&&(console.log("Enviando confirma\xe7\xe3o de prontid\xe3o do widget (widgetReady)"),window.parent.postMessage({type:"widgetReady"},"*"))}),[c]),(0,e.useEffect)((()=>{console.log("useEffect 2 -> Widget rodando em window.location.origin:",window.location.origin),c&&i.length>0&&(console.log("Estado atual de codigosPocos:",i),u(c))}),[c,i]);const u=e=>{const o=`POCO_CD_POCO IN (${i.join(",")})`;console.log("Adicionando camada com express\xe3o:",o);const r=new t.default({url:"https://basegis.petrobras.com.br/arcgis/rest/services/EXPLORA/Pocos_Sem_Simbolos/FeatureServer/0",definitionExpression:o,title:"Po\xe7os",outFields:["POCO_CD_POCO"],visible:!0,featureReduction:null});r.load().then((()=>{console.log("Camada carregada com sucesso:",r.title),e.view.map.add(r),setTimeout((()=>{console.log("camadas atuais no mapa:",e.view.map.layers)}),1e3)})).catch((e=>{console.error("Erro ao carregar camada:",e)}))};return e.default.createElement("div",{style:{height:"100%",width:"100%"}},e.default.createElement(o.JimuMapViewComponent,{useMapWidgetId:null===(s=r.useMapWidgetIds)||void 0===s?void 0:s[0],onActiveViewChange:e=>{e&&(console.log("Mapa carregado e pronto."),a.current=e,l(e))}}))}function s(e){i.p=e}i(725).default.request.interceptors.push({urls:/Pocos_Sem_Simbolos\/FeatureServer\/0/,before:e=>{e.requestOptions.query=Object.assign(Object.assign({},e.requestOptions.query),{f:"json"})}})})(),n})())}}}));